# ML/AI Pipeline: Этапы внедрения в BybitBot

## 1. Сбор и подготовка данных
- [x] Экспорт истории закрытых сделок в CSV через /api/export-closed-pnl
- [ ] (Опционально) Добавить экспорт открытых сделок, рыночных условий, индикаторов

## 2. Анализ и подготовка датасета (EDA)
- [ ] Провести анализ данных (Jupyter/Colab):
    - Распределение PNL, winrate, время удержания, причины закрытия
    - Корреляции между параметрами сделки и результатом
    - Очистка и нормализация данных
- [ ] Сформировать финальный датасет для обучения ML

## 3. Обучение ML-модели
- [ ] Выбрать ML-модель (CatBoost, XGBoost, RandomForest, LightGBM и др.)
- [ ] Определить фичи (параметры сделки, индикаторы, рыночные условия)
- [ ] Определить таргет (например, вероятность успеха, оптимальный TP/SL, прогноз PNL)
- [ ] Обучить модель на исторических данных
- [ ] Оценить качество (метрики: accuracy, ROC-AUC, MAE и др.)

## 4. Интеграция ML-инференса в backend
- [ ] Сохранить обученную модель (например, .cbm/.pkl)
- [ ] Реализовать модуль ml_optimizer.py для загрузки и инференса модели
- [ ] Добавить API-эндпоинт /api/ml-optimize для получения рекомендаций от ML
- [ ] Интегрировать ML-рекомендации в автокоррекцию параметров

## 5. Валидация и сравнение
- [ ] Сравнить эффективность ML-оптимизации с простыми правилами
- [ ] Вести логи и аналитику по результатам применения ML

## 6. Веб-интерфейс
- [ ] Добавить отображение ML-рекомендаций и их сравнение с текущими параметрами
- [ ] Визуализировать вклад ML в улучшение торговли

## 7. Постоянное обучение и улучшение
- [ ] Реализовать переобучение модели по мере накопления новых данных
- [ ] Добавить автоматическую/ручную валидацию новых моделей

---

> Все этапы отмечайте галочками по мере выполнения! 